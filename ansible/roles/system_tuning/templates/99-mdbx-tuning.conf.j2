# =============================================================================
# MDBX/Blockchain Database Tuning
# =============================================================================
# Generated by Ansible - do not edit manually
# See docs/PERFORMANCE-TUNING.md for detailed explanations.

# -----------------------------------------------------------------------------
# Dirty Page Management - CRITICAL for MDBX
# -----------------------------------------------------------------------------
# Lower values = more frequent, smaller writes; reduces latency spikes
vm.dirty_ratio = {{ vm_dirty_ratio }}
vm.dirty_background_ratio = {{ vm_dirty_background_ratio }}
vm.dirty_expire_centisecs = {{ vm_dirty_expire_centisecs }}
vm.dirty_writeback_centisecs = {{ vm_dirty_writeback_centisecs }}

# -----------------------------------------------------------------------------
# Swappiness - Keep database pages in RAM
# -----------------------------------------------------------------------------
# Low value = prefer keeping database pages in RAM over swapping
vm.swappiness = {{ vm_swappiness }}

# -----------------------------------------------------------------------------
# VFS Cache Pressure
# -----------------------------------------------------------------------------
# Controls tendency to reclaim dentry/inode cache vs page cache
vm.vfs_cache_pressure = {{ vm_vfs_cache_pressure }}

# -----------------------------------------------------------------------------
# Memory Map Limits - Essential for large MDBX databases
# -----------------------------------------------------------------------------
# MDBX may need many mappings for large databases
vm.max_map_count = {{ vm_max_map_count }}

# -----------------------------------------------------------------------------
# Zone Reclaim (NUMA systems)
# -----------------------------------------------------------------------------
# 0 = disabled (allocate from any node) - better for database workloads
vm.zone_reclaim_mode = {{ vm_zone_reclaim_mode }}
